import{T as q,p as b,Q as N,q as U,f as a,a as w,w as h,F as f,o as n,b as e,e as D,u as s,i as c,k as _,l as x,t as m,m as y}from"./app-l7-T_QVc.js";import{_ as S}from"./AuthenticatedLayout-D5lz5BQL.js";import"./ApplicationLogo-Dn1V6JC9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"py-12"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},A={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},B={class:"p-6 text-gray-900 dark:text-gray-100"},I={id:"contenido_principal"},M={class:"col-md-12"},$={class:"mb-4"},E=["value"],G={class:"mb-4"},H=["value"],z={class:"mb-4"},L={class:"mb-4"},Q={class:"mb-4"},j={class:"mb-4"},J={class:"mt-6"},K={class:"min-w-full table-auto mt-4"},O={style:{"text-align":"center"}},R={style:{"text-align":"center"}},W={style:{"text-align":"center"}},X={style:{"text-align":"center"}},Y=["onClick"],Z=["disabled"],le={__name:"create",setup(ee){const r=q({proveedor_id:"",fecha:"",glosa:"",productos:[]}),g=b([]),i=b(1),u=b(0),p=b(null),{proveedores:P,productos:v}=N().props,C=()=>{if(p.value&&i.value>0&&u.value>0){const l=v.find(o=>o.id===p.value);if(l){const o=g.value.findIndex(d=>d.producto_id===l.id);if(o!==-1){const d=g.value[o];d.cantidad+=i.value,d.precio=u.value,r.productos[o].cantidad=d.cantidad,r.productos[o].precio=d.precio}else{const d={producto_id:l.id,nombre:l.nombre,cantidad:i.value,precio:u.value};g.value.push(d),r.productos.push(d)}i.value=1,u.value=0}}else console.log("Datos inválidos. Verifica los campos antes de agregar el producto.")},V=l=>{g.value.splice(l,1),r.productos.splice(l,1)};return(l,o)=>{const d=U("Head");return n(),a(f,null,[w(d,{title:"Crear Nota de Compra"}),w(S,null,{header:h(()=>o[7]||(o[7]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Crear Nota de Compra",-1)])),default:h(()=>[e("div",T,[e("div",F,[e("div",A,[e("div",B,[e("section",I,[o[18]||(o[18]=e("div",{class:"col-md-12",style:{"margin-top":"10px"}},[e("div",{class:"col-md-12 mb-4"},[e("h3",{class:"text-lg font-semibold"},"Datos de la Nota de Compra")])],-1)),e("div",M,[e("form",{onSubmit:o[6]||(o[6]=D(t=>s(r).post(l.route("admin.notascompras.store")),["prevent"]))},[e("div",$,[o[9]||(o[9]=e("label",{for:"proveedor_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Proveedor",-1)),c(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>s(r).proveedor_id=t),class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},[o[8]||(o[8]=e("option",{value:""},"Seleccione un proveedor",-1)),(n(!0),a(f,null,x(s(P),t=>(n(),a("option",{key:t.id,value:t.id},m(t.razonsocial),9,E))),128))],512),[[_,s(r).proveedor_id]])]),e("div",G,[o[11]||(o[11]=e("label",{for:"producto_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Producto",-1)),c(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>p.value=t),class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},[o[10]||(o[10]=e("option",{value:""},"Seleccione un producto",-1)),(n(!0),a(f,null,x(s(v),t=>(n(),a("option",{key:t.id,value:t.id},m(t.nombre),9,H))),128))],512),[[_,p.value]])]),e("div",z,[o[12]||(o[12]=e("label",{for:"fecha",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Fecha",-1)),c(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>s(r).fecha=t),type:"date",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},null,512),[[y,s(r).fecha]])]),e("div",L,[o[13]||(o[13]=e("label",{for:"stock",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Cantidad",-1)),c(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>i.value=t),type:"number",min:"1",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},null,512),[[y,i.value]])]),e("div",Q,[o[14]||(o[14]=e("label",{for:"precio",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Precio",-1)),c(e("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>u.value=t),type:"number",min:"0",step:"0.01",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},null,512),[[y,u.value]])]),e("div",j,[o[15]||(o[15]=e("label",{for:"glosa",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Glosa",-1)),c(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=t=>s(r).glosa=t),rows:"4",class:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:""},null,512),[[y,s(r).glosa]])]),e("button",{type:"button",onClick:C,class:"w-full py-2 px-4 bg-green-600 text-white rounded-md shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50"}," Agregar Producto "),e("div",J,[o[17]||(o[17]=e("h4",{class:"text-lg font-semibold"},"Productos Agregados",-1)),e("table",K,[o[16]||(o[16]=e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"center"}},"Producto"),e("th",{style:{"text-align":"center"}},"Cantidad"),e("th",{style:{"text-align":"center"}},"Precio"),e("th",{style:{"text-align":"center"}},"Acción")])],-1)),e("tbody",null,[(n(!0),a(f,null,x(g.value,(t,k)=>(n(),a("tr",{key:k},[e("td",O,m(t.nombre),1),e("td",R,m(t.cantidad),1),e("td",W,m(t.precio),1),e("td",X,[e("button",{onClick:oe=>V(k),class:"bg-red-500 text-white px-4 py-2 rounded-md"},"Eliminar",8,Y)])]))),128))])])]),e("button",{type:"submit",class:"w-full py-2 px-4 bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",disabled:s(r).processing}," Guardar Nota de Compra ",8,Z)],32)])])])])])])]),_:1})],64)}}};export{le as default};
