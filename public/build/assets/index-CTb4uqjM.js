import{Q as $,p as i,h as _,f as l,a as g,u as y,w as v,F as f,o as n,Z as D,b as e,j as w,d as x,l as k,t as r,i as R,v as A,g as E}from"./app-l7-T_QVc.js";import{_ as L}from"./AuthenticatedLayout-D5lz5BQL.js";import"./ApplicationLogo-Dn1V6JC9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"py-12"},B={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},F={class:"p-6 text-gray-900 dark:text-gray-100"},I={id:"contenido_principal"},U={class:"col-md-12",style:{"margin-top":"10px"}},G={class:"col-md-12 mb-4"},Q={class:"col-md-12"},Z={class:"box box-default",style:{border:"1px solid #0c0c0c"}},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8",style:{padding:"10px"}},H={style:{height:"100%",overflow:"auto"}},J={class:"table table-bordered table-condensed table-striped",style:{width:"100%"}},K={style:{"text-align":"center"}},O={style:{"text-align":"center"}},W={style:{"text-align":"center"}},X={style:{"text-align":"center"}},Y=["onClick"],ee=["onClick"],se={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm z-50 transition-opacity"},te={class:"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-xl w-96 transform transition-all scale-95 hover:scale-100"},oe={class:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 text-center"},ae={class:"text-blue-500"},le={class:"mb-4"},ne={class:"mt-2 space-y-2 max-h-40 overflow-y-auto p-2 border rounded-lg"},ie=["value"],re={class:"text-gray-900 dark:text-gray-100"},de={class:"flex justify-end gap-2"},ce={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm z-50 transition-opacity"},ue={class:"bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-xl w-96 transform transition-all scale-95 hover:scale-100"},me={class:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 text-center"},ge={class:"text-red-500"},ve={class:"mb-4"},xe={class:"mt-2 space-y-2 max-h-40 overflow-y-auto p-2 border rounded-lg"},pe=["value"],be={class:"text-gray-900 dark:text-gray-100"},he={class:"flex justify-end gap-2"},Pe={__name:"index",setup(ye){const P=$(),d=i(P.props.roles),N=i(P.props.permissions||[]),p=i([]),c=i(null),u=i(!1),b=i(!1),m=i(null),h=i([]),S=t=>{m.value=t,h.value=[],b.value=!0};_(()=>{var t;return((t=window.Laravel)==null?void 0:t.roles)||[]}),_(()=>{var t;return((t=window.Laravel)==null?void 0:t.permissions)||[]}),_(()=>{var t;return((t=window.Laravel)==null?void 0:t.user)||{}});const C=t=>N.value.filter(s=>!t.permissions.some(o=>o.id==s.id)),V=t=>{c.value=t;const s=C(t);p.value=s.map(o=>o.id),u.value=!0,console.log(u.value)},j=()=>{m.value&&axios.post(route("admin.roles.removePermissions",m.value.id),{permissions:h.value}).then(t=>{b.value=!1;const s=t.data.role,o=d.value.findIndex(a=>a.id===s.id);o!==-1&&(d.value[o]=s)}).catch(t=>{console.error(t)})},M=()=>{c.value&&axios.post(route("admin.roles.assignPermissions",c.value.id),{permissions:p.value}).then(t=>{u.value=!1;const s=t.data.role,o=d.value.findIndex(a=>a.id===s.id);o!==-1&&(d.value[o]=s)}).catch(t=>{console.error(t)})};return(t,s)=>(n(),l(f,null,[g(y(D),{title:"Roles"}),g(L,null,{header:v(()=>s[4]||(s[4]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Roles ",-1)])),default:v(()=>[e("div",null,[e("div",T,[e("div",B,[e("div",z,[e("div",F,[e("section",I,[e("div",U,[e("div",G,[g(y(w),{href:t.route("admin.roles.create"),method:"get",as:"button",class:"bg-blue-500 text-white px-4 py-2 rounded"},{default:v(()=>s[5]||(s[5]=[x(" Crear ")])),_:1},8,["href"])])]),e("div",Q,[e("div",Z,[e("div",q,[e("div",H,[e("table",J,[s[8]||(s[8]=e("thead",{style:{"background-color":"#dff1ff"}},[e("th",{style:{"text-align":"center"}},"Nro"),e("th",{style:{"text-align":"center"}},"Nombre"),e("th",{style:{"text-align":"center"}},"Descripcion"),e("th",{style:{"text-align":"center"}},"AcciÃ³n")],-1)),e("tbody",null,[(n(!0),l(f,null,k(d.value,o=>(n(),l("tr",{key:o.id},[e("td",K,r(o.id),1),e("td",O,r(o.name),1),e("td",W,r(o.guard_name),1),e("td",X,[g(y(w),{href:t.route("admin.roles.edit",o),method:"get",class:"bg-yellow-500 text-white p-2 rounded",as:"button"},{default:v(()=>s[6]||(s[6]=[x("Editar")])),_:2},1032,["href"]),g(y(w),{onSuccess:t.onDeleteSuccess,href:t.route("admin.roles.destroy",o),method:"delete",class:"bg-red-500 text-white p-2 rounded",as:"button"},{default:v(()=>s[7]||(s[7]=[x("Eliminar")])),_:2},1032,["onSuccess","href"]),e("button",{onClick:a=>V(o),class:"bg-green-500 text-white p-2 rounded"},"Asignar Permisos",8,Y),e("button",{onClick:a=>S(o),class:"bg-red-600 text-white p-2 rounded"},"Eliminar Permisos",8,ee)])]))),128))])])])])])])]),u.value?(n(),l("div",se,[e("div",te,[e("h2",oe,[s[9]||(s[9]=x(" Asignar Permisos a: ")),e("span",ae,r(c.value.name),1)]),e("div",le,[s[10]||(s[10]=e("label",{class:"block text-gray-700 dark:text-gray-300 font-semibold"},"Seleccionar Permisos",-1)),e("div",ne,[(n(!0),l(f,null,k(C(c.value),o=>(n(),l("div",{key:o.id,class:"flex items-center gap-2"},[R(e("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>p.value=a),value:o.id,class:"rounded border-gray-300 text-blue-500 focus:ring focus:ring-blue-300"},null,8,ie),[[A,p.value]]),e("span",re,r(o.name),1)]))),128))])]),e("div",de,[e("button",{onClick:s[1]||(s[1]=o=>u.value=!1),class:"px-4 py-2 bg-gray-400 hover:bg-gray-500 text-white rounded-lg transition"},"Cancelar"),e("button",{onClick:M,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition"},"Guardar")])])])):E("",!0),b.value?(n(),l("div",ce,[e("div",ue,[e("h2",me,[s[11]||(s[11]=x(" Eliminar Permisos de: ")),e("span",ge,r(m.value.name),1)]),e("div",ve,[s[12]||(s[12]=e("label",{class:"block text-gray-700 dark:text-gray-300 font-semibold"},"Seleccionar Permisos a Eliminar",-1)),e("div",xe,[(n(!0),l(f,null,k(m.value.permissions,o=>(n(),l("div",{key:o.id,class:"flex items-center gap-2"},[R(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=a=>h.value=a),value:o.id,class:"rounded border-gray-300 text-red-500 focus:ring focus:ring-red-300"},null,8,pe),[[A,h.value]]),e("span",be,r(o.name),1)]))),128))])]),e("div",he,[e("button",{onClick:s[3]||(s[3]=o=>b.value=!1),class:"px-4 py-2 bg-gray-400 hover:bg-gray-500 text-white rounded-lg transition"},"Cancelar"),e("button",{onClick:j,class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition"},"Eliminar")])])])):E("",!0)])])])])])]),_:1})],64))}};export{Pe as default};
