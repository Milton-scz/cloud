import{p as u,T as h,f as l,a as N,b as t,t as i,g as d,e as I,i as c,m,u as r,k as _,F as R,o as n,bX as f}from"./app-l7-T_QVc.js";import q from"./Header-xZw9or7Z.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={key:0,class:"fixed inset-0 flex justify-center items-center bg-black bg-opacity-50"},E={class:"bg-white p-6 rounded-lg shadow-lg"},D={class:"text-lg font-bold text-center"},P={class:"contenido-principal mt-16"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},j={class:"p-6 text-gray-900 dark:text-gray-100"},F={class:"flex flex-col md:flex-row space-y-6 md:space-y-0 md:space-x-6"},Q={class:"md:w-1/2 space-y-4"},B={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},L={class:"space-y-6"},A={key:0,class:"text-sm text-red-500 mt-2"},H={key:0,class:"text-sm text-red-500 mt-2"},G={key:0,class:"text-sm text-red-500 mt-2"},J={key:0,class:"text-sm text-red-500 mt-2"},X={class:"space-y-6"},K={key:0,class:"text-sm text-red-500 mt-2"},W={key:0,class:"text-sm text-red-500 mt-2"},Y={key:0,class:"text-sm text-red-500 mt-2"},Z={key:0,class:"text-sm text-red-500 mt-2"},$={class:"md:w-1/2"},tt={class:"flex justify-center"},et=["src"],ot={__name:"PagoCreate",props:{numeroTransaccion:String,qrImage:String},setup(b){const g=u(""),x=u(""),y=u(""),p=u(!1),v=b;g.value=v.qrImage;const k=()=>{const s={};return o.name||(s.name="El nombre es obligatorio."),o.cedula||(s.cedula="La cédula es obligatoria."),o.tcCorreo?/\S+@\S+\.\S+/.test(o.tcCorreo)||(s.tcCorreo="Por favor ingresa un correo válido."):s.tcCorreo="El correo es obligatorio.",o.tnTelefono||(s.tnTelefono="El teléfono es obligatorio."),o.tcCiNit||(s.tcCiNit="El CI/NIT es obligatorio."),o.tcRazonSocial||(s.tcRazonSocial="La razón social es obligatoria."),(!o.tnMonto||o.tnMonto<=0)&&(s.tnMonto="El monto total debe ser mayor a 0."),o.tnTipoServicio||(s.tnTipoServicio="Selecciona un tipo de servicio."),s},o=h({name:"",cedula:"",precio:"",tnTelefono:"",tcRazonSocial:"",tcCorreo:"",tcCiNit:"",tnMonto:.01,taPedidoDetalle:[],tnTipoServicio:""}),w=()=>{o.errors={};const s=k();if(Object.keys(s).length>0){for(const[a,M]of Object.entries(s))o.errors[a]=M;return}const e=localStorage.getItem("carrito");if(e)try{o.taPedidoDetalle=JSON.parse(e)}catch(a){console.error("Error al parsear los datos de pedidoDetalle:",a)}f.post(route("landing.pagos.generarCobro"),o).then(a=>{console.log(a.data.qrImage),g.value=a.data.qrImage,x.value=a.data.nroTransaccion,console.log("Número transacción:",x.value),S(x.value)}).catch(a=>{console.log("Hubo un error al crear la venta:",a.response?a.response.data:a)})},S=s=>{const e=setInterval(async()=>{try{console.log("Entrando en la consulta de transacción:",s),(await f.get(route("landing.pagos.consultar"),{params:{venta_id:s}})).data.trim()==="COMPLETADO-PROCESADO"&&(clearInterval(e),C("Su pedido fue pagado con éxito!!!!"))}catch(a){console.error("Error al consultar la transacción:",a)}},1e4)};function C(s){y.value=s,p.value=!0}function T(){p.value=!1}return(s,e)=>(n(),l(R,null,[N(q),p.value?(n(),l("div",V,[t("div",E,[t("p",D,i(y.value),1),t("div",{class:"mt-4 flex justify-center"},[t("button",{onClick:T,class:"bg-blue-500 text-white p-2 rounded"},"Cerrar")])])])):d("",!0),t("div",P,[t("div",U,[t("div",O,[t("div",j,[e[20]||(e[20]=t("div",{class:"mb-6 text-center"},[t("h3",{class:"text-3xl font-bold"},"PagoFacil QR y Tigo Money"),t("p",{class:"text-blue-500"},"Integración de servicios PagoFacil")],-1)),t("div",F,[t("div",Q,[e[18]||(e[18]=t("h3",{class:"text-2xl font-bold"},"Datos para la factura",-1)),t("form",{onSubmit:I(w,["prevent"]),target:"QrImage"},[t("div",B,[t("div",L,[t("div",null,[e[8]||(e[8]=t("label",{for:"name",class:"block text-sm font-medium dark:text-gray-100 text-gray-700"},"Nombre",-1)),c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r(o).name=a),type:"text",id:"name",name:"name",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm text-gray-900 dark:text-gray-100 dark:bg-gray-700 bg-white",required:""},null,512),[[m,r(o).name]]),r(o).errors.name?(n(),l("p",A,i(r(o).errors.name),1)):d("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{for:"cedula",class:"block text-sm font-medium dark:text-gray-100 text-gray-700"},"Cédula",-1)),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>r(o).cedula=a),type:"text",id:"cedula",name:"cedula",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm text-gray-900 dark:text-gray-100 dark:bg-gray-700 bg-white",required:""},null,512),[[m,r(o).cedula]]),r(o).errors.cedula?(n(),l("p",H,i(r(o).errors.cedula),1)):d("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{for:"email",class:"block text-sm font-medium dark:text-gray-100 text-gray-700"},"Correo",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r(o).tcCorreo=a),type:"email",id:"email",name:"email",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm text-gray-900 dark:text-gray-100 dark:bg-gray-700 bg-white",required:""},null,512),[[m,r(o).tcCorreo]]),r(o).errors.tcCorreo?(n(),l("p",G,i(r(o).errors.tcCorreo),1)):d("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{for:"telefono",class:"block text-sm font-medium dark:text-gray-100 text-gray-700"},"Teléfono",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>r(o).tnTelefono=a),type:"text",id:"telefono",name:"telefono",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm text-gray-900 dark:text-gray-100 dark:bg-gray-700 bg-white",required:""},null,512),[[m,r(o).tnTelefono]]),r(o).errors.tnTelefono?(n(),l("p",J,i(r(o).errors.tnTelefono),1)):d("",!0)])]),t("div",X,[t("div",null,[e[12]||(e[12]=t("label",{for:"ciNit",class:"block text-sm font-medium dark:text-gray-100 text-gray-700"},"CI/NIT",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r(o).tcCiNit=a),type:"text",id:"ciNit",name:"ciNit",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm text-gray-900 dark:text-gray-100 dark:bg-gray-700 bg-white",required:""},null,512),[[m,r(o).tcCiNit]]),r(o).errors.tcCiNit?(n(),l("p",K,i(r(o).errors.tcCiNit),1)):d("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{for:"tcRazonSocial",class:"block text-sm font-medium dark:text-gray-100 text-gray-700"},"Razón Social",-1)),c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r(o).tcRazonSocial=a),type:"text",id:"tcRazonSocial",name:"tcRazonSocial",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm text-gray-900 dark:text-gray-100 dark:bg-gray-700 bg-white",required:""},null,512),[[m,r(o).tcRazonSocial]]),r(o).errors.tcRazonSocial?(n(),l("p",W,i(r(o).errors.tcRazonSocial),1)):d("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{for:"tnMonto",class:"block text-sm font-medium dark:text-gray-100 text-gray-700"},"Monto Total",-1)),c(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>r(o).tnMonto=a),type:"decimal",id:"tnMonto",name:"tnMonto",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm text-gray-900 dark:text-gray-100 dark:bg-gray-700 bg-white",required:""},null,512),[[m,r(o).tnMonto]]),r(o).errors.tnMonto?(n(),l("p",Y,i(r(o).errors.tnMonto),1)):d("",!0)]),t("div",null,[e[16]||(e[16]=t("label",{for:"tipoServicio",class:"block text-sm font-medium dark:text-gray-100 text-gray-700"},"Tipo de Servicio",-1)),c(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>r(o).tnTipoServicio=a),id:"tipoServicio",class:"mt-1 block w-full border p-2 rounded-md shadow-sm text-gray-900 dark:text-gray-100 dark:bg-gray-700 bg-white"},e[15]||(e[15]=[t("option",{value:"1"},"Servicio QR",-1),t("option",{value:"2"},"Tigo Money",-1)]),512),[[_,r(o).tnTipoServicio]]),r(o).errors.tnTipoServicio?(n(),l("p",Z,i(r(o).errors.tnTipoServicio),1)):d("",!0)])])]),e[17]||(e[17]=t("div",{class:"mt-6 flex items-center justify-center"},[t("button",{type:"submit",class:"bg-blue-500 dark:text-gray-100 text-white px-4 py-2 rounded-md"},"Generar Pago")],-1))],32)]),t("div",$,[e[19]||(e[19]=t("h3",{class:"text-2xl font-bold text-center"},null,-1)),t("div",tt,[t("iframe",{name:"QrImage",style:{width:"100%",height:"495px"},src:g.value},null,8,et)])])])])])])])],64))}},lt=z(ot,[["__scopeId","data-v-916e36d4"]]);export{lt as default};
