import{h as p,Q as E,p as I,T as P,x as V,f as a,a as S,u as d,w as g,F as m,o as n,Z as F,b as e,i as u,m as D,t as l,g as i,k as x,l as y,c as L,d as M,j as H}from"./app-l7-T_QVc.js";import{_ as Q}from"./AuthenticatedLayout-D5lz5BQL.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-Dn1V6JC9.js";const $={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6 text-gray-900 dark:text-gray-100"},K={class:"flex flex-wrap gap-2"},O={class:"w-1/6"},R={key:0,class:"text-red-500 text-xs mt-1"},W={class:"w-1/5"},X=["value"],Y={key:0,class:"text-red-500 text-xs mt-1"},ee={class:"w-1/5"},te=["value"],se={key:0,class:"text-red-500 text-xs mt-1"},oe={class:"w-1/6"},re={key:0,class:"text-sm text-red-500 mt-2"},de={class:"w-1/6"},ne={key:0,class:"text-red-500 text-xs mt-1"},ae=["disabled"],le={key:0,class:"mt-4 text-center text-gray-600"},ie={key:1,class:"mt-4 text-green-500 text-center"},ue={key:2,class:"mt-4 text-red-500 text-center"},ce={key:3,class:"mt-4 text-center"},me={class:"max-w-7xl mx-auto sm:px-6 lg:px-8",style:{padding:"10px"}},pe={style:{height:"100%",overflow:"auto"}},ge={class:"table table-bordered table-condensed table-striped",style:{width:"100%"}},xe={style:{"text-align":"center"}},ye={style:{"text-align":"center"}},be={style:{"text-align":"center"}},fe={style:{"text-align":"center"}},ke={style:{"text-align":"center"}},_e={style:{"text-align":"center"}},he={__name:"ajuste_index",props:{almacenes:Array,productos:Array,error:String,success:String},setup(c){const j=p(()=>{var r;return((r=window.Laravel)==null?void 0:r.permissions)||[]}),b=c,N=E(),f=I(N.props.ajustes||{}),C=r=>j.value[r]===!0,T=r=>{f.value=r.props.ajustes},s=P({producto_id:"",almacen_id:"",tipo:0,cantidad:1,descripcion:""}),U=p(()=>{const r=b.almacenes.find(t=>t.id===s.almacen_id);return r?r.nombre:""}),q=p(()=>{const r=b.productos.find(t=>t.id===s.producto_id);return r?r.nombre:""});V(()=>s.producto_id,r=>{s.nombre=q.value}),V(()=>s.almacen_id,r=>{s.nombre=U.value});const B=()=>{axios.post(route("admin.ajustesinventarios.agregar"),s).then(r=>{alert(r.data.message)}).catch(r=>{console.log("Hubo un error ",r),alert(r)})};return(r,t)=>(n(),a(m,null,[S(d(F),{title:"Ajuste Inventario"}),S(Q,null,{header:g(()=>t[5]||(t[5]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Ajuste inventario",-1)])),default:g(()=>{var k,_,h,w;return[e("div",$,[e("div",z,[e("div",G,[e("div",J,[e("form",{onSubmit:B,class:"space-y-4"},[e("div",K,[e("div",O,[t[6]||(t[6]=e("label",{for:"descripcion",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Descripción:",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>d(s).descripcion=o),type:"text",required:"",class:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[D,d(s).descripcion]]),d(s).errors.descripcion?(n(),a("p",R,l(d(s).errors.descripcion),1)):i("",!0)]),e("div",W,[t[8]||(t[8]=e("label",{for:"producto_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Producto:",-1)),u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>d(s).producto_id=o),required:"",class:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[t[7]||(t[7]=e("option",{value:""},"Seleccione",-1)),(n(!0),a(m,null,y(c.productos,o=>(n(),a("option",{key:o.id,value:o.id},l(o.nombre),9,X))),128))],512),[[x,d(s).producto_id]]),d(s).errors.producto_id?(n(),a("p",Y,l(d(s).errors.producto_id),1)):i("",!0)]),e("div",ee,[t[10]||(t[10]=e("label",{for:"almacen_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Almacén:",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>d(s).almacen_id=o),required:"",class:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[t[9]||(t[9]=e("option",{value:""},"Seleccione",-1)),(n(!0),a(m,null,y(c.almacenes,o=>(n(),a("option",{key:o.id,value:o.id},l(o.nombre),9,te))),128))],512),[[x,d(s).almacen_id]]),d(s).errors.almacen_id?(n(),a("p",se,l(d(s).errors.almacen_id),1)):i("",!0)]),e("div",oe,[t[12]||(t[12]=e("label",{for:"tipo",class:"block text-sm font-medium text-gray-700"},"Tipo de Ajuste",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>d(s).tipo=o),id:"tipoServicio",class:"mt-1 block w-full border px-2 py-1 rounded-md shadow-sm"},t[11]||(t[11]=[e("option",{value:"1"},"Ingreso",-1),e("option",{value:"2"},"Egreso",-1)]),512),[[x,d(s).tipo]]),d(s).errors.tipo?(n(),a("p",re,l(d(s).errors.tipo),1)):i("",!0)]),e("div",de,[t[13]||(t[13]=e("label",{for:"cantidad",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Cantidad:",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>d(s).cantidad=o),type:"number",min:"1",required:"",class:"mt-1 block w-full px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[D,d(s).cantidad]]),d(s).errors.cantidad?(n(),a("p",ne,l(d(s).errors.cantidad),1)):i("",!0)])]),e("button",{type:"submit",class:"mt-4 w-full py-2 px-4 bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",disabled:d(s).processing}," Agregar Ajuste ",8,ae)],32),c.productos.length===0?(n(),a("div",le,t[14]||(t[14]=[e("p",null,"No hay productos disponibles para agregar a este almacén.",-1)]))):i("",!0),(_=(k=r.flash)==null?void 0:k.value)!=null&&_.success?(n(),a("div",ie,[e("p",null,l(r.flash.success),1)])):i("",!0),(w=(h=r.flash)==null?void 0:h.value)!=null&&w.error?(n(),a("div",ue,[e("p",null,l(r.flash.error),1)])):i("",!0),d(s).processing?(n(),a("div",ce,t[15]||(t[15]=[e("span",{class:"loader"},null,-1),e("p",{class:"text-gray-500"},"Cargando...",-1)]))):i("",!0)]),e("div",me,[e("div",pe,[e("table",ge,[t[17]||(t[17]=e("thead",null,[e("th",{colspan:"5"})],-1)),t[18]||(t[18]=e("thead",{style:{"background-color":"#dff1ff"}},[e("th",{style:{"text-align":"center"}},"Nro"),e("th",{style:{"text-align":"center"}},"Producto"),e("th",{style:{"text-align":"center"}},"Almacen"),e("th",{style:{"text-align":"center"}},"Tipo de Ajuste"),e("th",{style:{"text-align":"center"}},"Cantidad"),e("th",{style:{"text-align":"center"}},"Descripcion"),e("th",{style:{"text-align":"center"}},"Acción")],-1)),e("tbody",null,[(n(!0),a(m,null,y(f.value,o=>{var v,A;return n(),a("tr",{key:o.id},[e("td",xe,l(o.id),1),e("td",ye,l((v=o.producto)==null?void 0:v.nombre),1),e("td",be,l((A=o.almacen)==null?void 0:A.nombre),1),e("td",fe,l(o.tipo===1?"Ingreso":o.tipo===2?"Egreso":"Desconocido"),1),e("td",ke,l(o.cantidad),1),e("td",_e,l(o.descripcion),1),C("eliminar-ajuste-inventario")?(n(),L(d(H),{key:0,onSuccess:T,href:r.route("admin.ajustesinventarios.destroy",o),method:"delete",class:"bg-red-500 text-white p-2 rounded",as:"button"},{default:g(()=>t[16]||(t[16]=[M(" Eliminar")])),_:2},1032,["href"])):i("",!0)])}),128))])])])]),t[19]||(t[19]=e("div",null,null,-1))])])])]}),_:1})],64))}},Se=Z(he,[["__scopeId","data-v-662ddc83"]]);export{Se as default};
